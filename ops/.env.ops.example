# ============================================
# CONFIGURACIÓN DE OPERACIONES (OPS)
# ============================================
# Copia este archivo a .env.ops y rellena los valores reales
# Este archivo contiene configuraciones sensibles para scripts de despliegue

# ============================================
# CONFIGURACIÓN DE BASE DE DATOS
# ============================================
DB_HOST=localhost
DB_PORT=5432
DB_NAME=compilatime
DB_USER=rafa
DB_PASSWORD=C0mp1l@te

# ============================================
# CONFIGURACIÓN DE REPOSITORIO GIT
# ============================================
# URL del repositorio (HTTPS o SSH)
# Ejemplo HTTPS: https://github.com/tu-usuario/compilatime.git
# Ejemplo SSH: git@github.com:tu-usuario/compilatime.git
REPO_URL=https://github.com/tu-usuario/compilatime.git

# Rama por defecto para despliegues
REPO_BRANCH=main

# ============================================
# CONFIGURACIÓN DE PM2
# ============================================
PM2_APP_NAME=compilatime
PM2_EXEC_MODE=fork
PM2_INSTANCES=1

# ============================================
# CONFIGURACIÓN DE RUTAS DE DESPLIEGUE
# ============================================
DEPLOY_ROOT=/opt/compilatime
RELEASES_DIR=${DEPLOY_ROOT}/releases
CURRENT_LINK=${DEPLOY_ROOT}/current
BACKUPS_DIR=${DEPLOY_ROOT}/backups
LOGS_DIR=${DEPLOY_ROOT}/logs

# ============================================
# CONFIGURACIÓN DE BACKUPS
# ============================================
# Número de backups de DB a mantener
DB_BACKUP_RETENTION=14

# Número de backups de config a mantener
CONFIG_BACKUP_RETENTION=10

# Espacio mínimo requerido en disco (en GB) antes de backup
MIN_DISK_SPACE_GB=2

# ============================================
# CONFIGURACIÓN DE NODE/NPM
# ============================================
NODE_VERSION=20
NPM_VERSION=latest

# ============================================
# CONFIGURACIÓN DE NGINX
# ============================================
NGINX_USER=www-data
NGINX_CONFIG_PATH=/etc/nginx/sites-available/compilatime

# ============================================
# CONFIGURACIÓN DE NOTIFICACIONES (OPCIONAL)
# ============================================
# Webhook de Slack para notificaciones de despliegue
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# Email para notificaciones de errores
# ALERT_EMAIL=ops@tuempresa.com

# ============================================
# CONFIGURACIÓN DE SEGURIDAD
# ============================================
# Usuario que ejecuta los scripts de despliegue
DEPLOY_USER=deploy

# Grupo del usuario de despliegue
DEPLOY_GROUP=deploy

# ============================================
# CONFIGURACIÓN DE ENTORNO
# ============================================
# Entorno de despliegue: development, staging, production
NODE_ENV=production

# Puerto del backend
BACKEND_PORT=4000

# Puerto del frontend (solo para desarrollo)
FRONTEND_PORT=5173

# URL del frontend (para CORS)
FRONTEND_URL=http://localhost:3000

# ============================================
# CONFIGURACIÓN DE MIGRACIONES
# ============================================
# Habilitar migraciones automáticas en despliegue
ENABLE_MIGRATIONS=true

# Timeout para migraciones (en segundos)
MIGRATION_TIMEOUT=300

# ============================================
# CONFIGURACIÓN DE ROLLBACK
# ============================================
# Número de releases anteriores a mantener
RELEASE_RETENTION=5

# ============================================
# CONFIGURACIÓN DE LOGS
# ============================================
# Nivel de log: debug, info, warn, error
LOG_LEVEL=info

# Formato de timestamp en logs
LOG_TIMESTAMP_FORMAT="%Y-%m-%d %H:%M:%S"
